{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  galleryContainer: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-button'),\n};\n\nexport function createMarkup(arr, append = false) {\n  const markup = arr\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"340\" height=\"200\"/>\n      </a>\n      <ul class=\"inform-container\">\n        <li class=\"inform-item\">\n          <h3 class=\"inform-title\">Likes</h3>\n          <p>${likes}</p>\n        </li>\n        <li class=\"inform-item\">\n          <h3 class=\"inform-title\">Views</h3>\n          <p>${views}</p>\n        </li>\n        <li class=\"inform-item\">\n          <h3 class=\"inform-title\">Comments</h3>\n          <p>${comments}</p>\n        </li>\n        <li class=\"inform-item\">\n          <h3 class=\"inform-title\">Downloads</h3>\n          <p>${downloads}</p>\n        </li>\n      </ul>\n    </li>`\n    )\n    .join('');\n\n  if (append) {\n    refs.galleryContainer.insertAdjacentHTML('beforeend', markup);\n  } else {\n    refs.galleryContainer.innerHTML = markup;\n  }\n}\n\nexport function showError(message) {\n  iziToast.error({\n    message: message || 'Sorry, an error occurred. Try again!',\n    backgroundColor: '#ef4040',\n    maxWidth: 432,\n    timeout: 3000,\n    messageColor: '#fafafb',\n    messageSize: '16',\n    theme: 'dark',\n    progressBarColor: '#b51b1b',\n    position: 'topRight',\n  });\n}\n\nexport function scrollCard() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  scrollZoom: false,\n});\n\nlightbox.on('show.simplelightbox', function () {});\n","import axios from 'axios';\n\nconst API_KEY = '44899470-dc00d504e23887fc09aa8b920';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const searchSettings = {\n  q: '',\n  page: 1,\n  per_page: 15,\n};\n\nexport async function searchImages(searchQuery, page, perPage) {\n  const params = {\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n  };\n\n  const response = await axios.get(BASE_URL, { params });\n  return response.data;\n}\n","import {\n  refs,\n  showError,\n  scrollCard,\n  createMarkup,\n  lightbox,\n} from './js/render-functions';\nimport { searchImages, searchSettings } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  timeout: 2500,\n  resetOnHover: true,\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n  position: 'topRight',\n  titleSize: '16px',\n  titleColor: '#fff',\n  titleLineHeight: '1.5',\n  messageSize: '16px',\n  messageLineHeight: '1.5',\n  backgroundColor: 'rgba(255, 182, 66, 0.8)',\n});\n\nrefs.searchForm.addEventListener('submit', handlerSearchButton);\nrefs.loadMoreBtn.addEventListener('click', loadMoreImages);\n\nlet currentPage;\nlet totalPage;\n\nasync function handlerSearchButton(event) {\n  event.preventDefault();\n\n  const searchQuery = event.target.query.value.trim();\n  if (!searchQuery) {\n    showError('Enter data to search');\n    return;\n  }\n\n  searchSettings.q = searchQuery;\n  searchSettings.page = 1;\n\n  refs.galleryContainer.innerHTML = '';\n  refs.loadMoreBtn.classList.remove('visible');\n  refs.loader.classList.add('visible');\n\n  try {\n    const data = await searchImages(\n      searchQuery,\n      searchSettings.page,\n      searchSettings.per_page\n    );\n    totalPage = Math.ceil(data.totalHits / searchSettings.per_page);\n\n    if (data.hits.length === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    createMarkup(data.hits);\n    lightbox.refresh();\n\n    if (totalPage > searchSettings.page) {\n      refs.loadMoreBtn.classList.add('visible');\n      setTimeout(() => {\n        refs.loadMoreBtn.classList.add('fade-in');\n      }, 3000);\n    }\n  } catch (err) {\n    showError(err.message);\n  } finally {\n    refs.loader.classList.remove('visible');\n    refs.searchForm.reset();\n  }\n}\n\nasync function loadMoreImages() {\n  refs.loader.classList.add('visible');\n  refs.loadMoreBtn.classList.remove('visible');\n\n  searchSettings.page += 1;\n  try {\n    const data = await searchImages(\n      searchSettings.q,\n      searchSettings.page,\n      searchSettings.per_page\n    );\n    createMarkup(data.hits, true);\n    lightbox.refresh();\n    scrollCard();\n\n    if (totalPage === searchSettings.page) {\n      refs.loadMoreBtn.classList.remove('visible');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        backgroundColor: '#ef4040',\n        maxWidth: 432,\n        timeout: 3000,\n        messageColor: '#fafafb',\n        messageSize: '16',\n        theme: 'dark',\n        progressBarColor: '#b51b1b',\n        position: 'topRight',\n      });\n    } else {\n      refs.loadMoreBtn.classList.add('visible');\n    }\n  } catch (err) {\n    showError(err.message);\n  } finally {\n    refs.loader.classList.remove('visible');\n  }\n}\n"],"names":["refs","createMarkup","arr","append","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","showError","message","iziToast","scrollCard","cardHeight","lightbox","SimpleLightbox","API_KEY","BASE_URL","searchSettings","searchImages","searchQuery","page","perPage","params","axios","handlerSearchButton","loadMoreImages","totalPage","event","data","err"],"mappings":"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"}